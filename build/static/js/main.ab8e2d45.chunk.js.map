{"version":3,"sources":["components/Phonebook.js","components/PersonForm.js","components/Filter.js","App.js","index.js"],"names":["Phonebook","person","handleDelButton","key","name","number","value","id","onClick","PersonForm","addPerson","handleNumberChange","newNumber","handleNameChange","onSubmit","onChange","type","Filter","newFilter","handleFilter","Notification","notification","className","App","useState","persons","setPersons","setName","setNewNumber","setFilter","reloadPerson","setReloadPerson","message","setMessage","useEffect","axios","get","then","response","console","log","data","event","window","confirm","target","delete","dataset","mssg","catch","error","setTimeout","personToShow","filter","toLowerCase","includes","preventDefault","find","e","put","map","post","concat","personShow","i","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8LACaA,EAAY,SAAC,GAAoC,IAAnCC,EAAkC,EAAlCA,OAAQC,EAA0B,EAA1BA,gBAA0B,EAATC,IAClD,OACE,gCACGF,EAAOG,KADV,IACiBH,EAAOI,OACtB,wBAAQC,MAAOL,EAAOG,KAAM,YAAWH,EAAOM,GAAIC,QAASN,EAA3D,wBCHOO,EAAa,SAAC,GAAwE,IAAvEC,EAAsE,EAAtEA,UAAWN,EAA2D,EAA3DA,KAAMO,EAAqD,EAArDA,mBAAoBC,EAAiC,EAAjCA,UAAWC,EAAsB,EAAtBA,iBAE1E,OACK,uBAAMC,SAAUJ,EAAhB,UACC,yCACQ,uBAAOJ,MAAOF,EAAMW,SAAUF,IADtC,WAEU,uBAAOP,MAAOM,EAAWG,SAAUJ,OAE7C,8BACE,wBAAQK,KAAK,SAAb,uBCXGC,EAAS,SAAC,GAA+B,IAA9BC,EAA6B,EAA7BA,UAAWC,EAAkB,EAAlBA,aAEjC,OACE,oDACmB,uBAAOb,MAAOY,EAAWH,SAAUI,Q,gBC2IpDC,EAAe,SAAC,GAAoB,IAAnBC,EAAkB,EAAlBA,aACrB,OAAoB,OAAjBA,EACM,KAGP,qBAAKC,UAAU,eAAf,SACGD,KAKQE,EA9IH,WACV,MAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAwBF,mBAAS,IAAjC,mBAAOpB,EAAP,KAAauB,EAAb,KACA,EAAkCH,mBAAS,IAA3C,mBAAOZ,EAAP,KAAkBgB,EAAlB,KACA,EAA+BJ,mBAAS,IAAxC,mBAAON,EAAP,KAAkBW,EAAlB,KACA,EAAwCL,oBAAS,GAAjD,mBAAOM,EAAP,KAAqBC,EAArB,KACA,EAA8BP,mBAAS,MAAvC,mBAAOQ,EAAP,KAAgBC,EAAhB,KAEAC,qBAAU,WACRC,IACCC,IAAI,sDACJC,MAAK,SAACC,GACLC,QAAQC,IAAI,gBAAiBF,GAC7BZ,EAAWY,EAASG,MACpBV,GAAgB,QAEjB,CAACD,IACJS,QAAQC,IAAI,iBAAkBtB,GAE9B,IAgEMhB,EAAkB,SAACwC,GACpBC,OAAOC,QAAP,iBAAyBF,EAAMG,OAAOvC,MAAtC,OACD6B,IACMW,OADN,6DACmEJ,EAAMG,OAAOE,QAAQC,OAClFX,MAAK,SAAAC,GACJC,QAAQC,IAAI,gBAAiBF,GAC7BP,GAAgB,MAGjBkB,OAAM,SAAAC,GACNjB,EAAW,GAAD,OACLS,EAAMG,OAAOvC,MADR,6CAGV6C,YAAW,WACTlB,EAAW,QACV,KACHN,EAAQ,IACRC,EAAa,QAIjBwB,EAAgBlC,EAElBO,EAAQ4B,QAAO,SAAApD,GACb,QAAOA,EAAOG,KAAKkD,cAAcC,SAASrC,EAAUoC,kBAFtD7B,EAMN,OACI,gCACE,2CACA,cAAC,EAAD,CAAcJ,aAAcW,IAC5B,cAAC,EAAD,CAAQb,aAnCS,SAACuB,GACpBb,EAAUa,EAAMG,OAAOvC,QAkCeY,UAAWA,IAC/C,2CACA,cAAC,EAAD,CAAYR,UAlGE,SAACgC,GAEjB,GADAA,EAAMc,iBACF/B,EAAQgC,MAAK,SAAAC,GAAC,OAAIA,EAAEtD,OAASA,KAAO,CACtCuC,OAAOC,QAAP,UAAkBxC,EAAlB,0EACA,IAAIG,EAAKkB,EAAQ4B,QAAO,SAAAK,GAAC,OAAIA,EAAEtD,OAASA,KAAM,GAAGG,GAC3CN,EAAS,CACbG,KAAMA,EACNC,OAAQO,GAEVuB,IACGwB,IADH,6DAC6DpD,GAAMN,GAChEoC,MAAK,SAAAC,GACJZ,EAAWD,EAAQmC,KAAI,SAAA3D,GAAM,OAAIA,EAAOM,KAAOA,EAAKN,EAASqC,EAASG,SACtEd,EAAQ,IACRC,EAAa,IACbK,EAAW,WAAD,OACGhC,EAAOG,OAEpB+C,YAAW,WACTlB,EAAW,QACV,QAEJgB,OAAM,SAAAC,GACLjB,EAAW,GAAD,OACLhC,EAAOG,KADF,6CAGV+C,YAAW,WACTlB,EAAW,QACV,KACHN,EAAQ,IACRC,EAAa,WAGd,CACH,IAAM3B,EAAS,CACbG,KAAMA,EACNC,OAAQO,GAEVuB,IACG0B,KAAK,qDAAsD5D,GAC3DoC,MAAK,SAAAC,GACJZ,EAAWD,EAAQqC,OAAO7D,IAC1B0B,EAAQ,IACRC,EAAa,IACbK,EAAW,SAAD,OACChC,EAAOG,OAElB+C,YAAW,WACTlB,EAAW,QACV,UAiD2B7B,KAAMA,EAAMS,iBAxCzB,SAAC6B,GACxBf,EAAQe,EAAMG,OAAOvC,QAwCjBM,UAAWA,EAAWD,mBA5CD,SAAC+B,GAC1Bd,EAAac,EAAMG,OAAOvC,UA6CxB,yCAIC8C,EAAaQ,KAAI,SAACG,EAAYC,GAAb,OAChB,cAAC,EAAD,CAAmB/D,OAAQ8D,EAAY7D,gBAAiBA,GAAxC8D,UCpIxBC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.ab8e2d45.chunk.js","sourcesContent":["\nexport const Phonebook = ({person, handleDelButton, key}) => { \n  return(\n    <div>\n      {person.name} {person.number} \n      <button value={person.name} data-mssg={person.id} onClick={handleDelButton}>delete</button>\n    </div>\n  )\n\n  }","import React from 'react';\n\nexport const PersonForm = ({addPerson, name, handleNumberChange, newNumber, handleNameChange}) => {\n  \n  return (  \n       <form onSubmit={addPerson}>\n        <div>\n          name: <input value={name} onChange={handleNameChange} />\n          number: <input value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n\n  )\n}\n\nexport default PersonForm","export const Filter = ({newFilter, handleFilter}) => {\n\n  return (\n    <div>\n      filter shown with<input value={newFilter} onChange={handleFilter} ></input>\n    </div>\n\n  )\n\n}","import React, { useState, useEffect} from 'react'\nimport { Phonebook } from './components/Phonebook'\nimport { PersonForm } from './components/PersonForm'\nimport { Filter } from './components/Filter'\nimport axios from 'axios';\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [name, setName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newFilter, setFilter] = useState('');\n  const [reloadPerson, setReloadPerson] = useState(false);\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    axios\n    .get('http://agile-taiga-71127.herokuapp.com/api/persons')\n    .then((response) => {\n      console.log('response :>> ', response);\n      setPersons(response.data)\n      setReloadPerson(false);\n    })\n  }, [reloadPerson]);\n  console.log('newFilter :>> ', newFilter);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    if (persons.find(e => e.name === name)) {\n      window.confirm(`${name} is already added to phonebook,replace the old number with a new one?`);\n      let id = persons.filter(e => e.name === name)[0].id;\n      const person = {\n        name: name,\n        number: newNumber\n      }\n      axios\n        .put(`http://agile-taiga-71127.herokuapp.com/api/persons/${id}`, person)\n        .then(response => {\n          setPersons(persons.map(person => person.id !== id ? person : response.data));\n          setName('');\n          setNewNumber('');\n          setMessage(\n            `Updated ${person.name}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          setMessage(\n            `${person.name} is already deleted from the database :(`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          setName('');\n          setNewNumber(\"\");\n          })\n    } \n    else {\n      const person = {\n        name: name,\n        number: newNumber\n      }\n      axios\n        .post('http://agile-taiga-71127.herokuapp.com/api/persons', person)\n        .then(response => {\n          setPersons(persons.concat(person));\n          setName('');\n          setNewNumber(\"\");\n          setMessage(\n            `Added ${person.name}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        }\n          )\n        \n    }\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  }\n  const handleNameChange = (event) => {\n    setName(event.target.value);\n  }\n  const handleFilter = (event) => {\n    setFilter(event.target.value);\n  }\n  const handleDelButton = (event) => {\n    if(window.confirm(`Delete ${event.target.value}?`)){\n      axios\n           .delete(`http://agile-taiga-71127.herokuapp.com/api/persons/${event.target.dataset.mssg}`)\n           .then(response => {\n             console.log('response :>> ', response)\n             setReloadPerson(true);\n\n           })\n           .catch(error => {\n            setMessage(\n              `${event.target.value} is already deleted from the database :(`\n            )\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n            setName('');\n            setNewNumber(\"\");\n            })  \n}}\n\n  const personToShow = !newFilter\n    ? persons\n    : persons.filter(person => {\n        return person.name.toLowerCase().includes(newFilter.toLowerCase()) ? true\n        : false\n  });\n\nreturn (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={message}/>\n      <Filter handleFilter={handleFilter} newFilter={newFilter} />\n      <h3>add a new</h3>\n      <PersonForm addPerson={addPerson} name={name} handleNameChange={handleNameChange}\n        newNumber={newNumber} handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      {/* <div>debug: {name}</div>\n      <div>debug: {newNumber}</div>\n      <div>debug: {newFilter}</div> */}\n      {personToShow.map((personShow, i) =>\n        <Phonebook key={i} person={personShow} handleDelButton={handleDelButton}/>\n      )}\n    </div>\n  )\n}\n\nconst Notification = ({notification}) => {\n  if(notification === null){\n    return null;\n  }\n  return(\n    <div className=\"notification\">\n      {notification}\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App'; \n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n "],"sourceRoot":""}
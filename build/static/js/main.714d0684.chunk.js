(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(2),c=t.n(a),o=t(14),i=t.n(o),u=(t(19),t(3)),r=t(0),s=function(e){var n=e.person,t=e.handleDelButton;e.key;return Object(r.jsxs)("div",{children:[n.name," ",n.number,Object(r.jsx)("button",{value:n.name,"data-mssg":n.id,onClick:function(){t(n)},children:"delete"})]})},l=function(e){var n=e.addPerson,t=e.name,a=e.handleNumberChange,c=e.newNumber,o=e.handleNameChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t,onChange:o}),"number: ",Object(r.jsx)("input",{value:c,onChange:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.newFilter,t=e.handleFilter;return Object(r.jsxs)("div",{children:["filter shown with",Object(r.jsx)("input",{value:n,onChange:t})]})},b=t(4),j=t.n(b),h=function(e){var n=e.notification;return null===n?null:Object(r.jsx)("div",{className:"notification",children:n})},f=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),i=Object(u.a)(o,2),b=i[0],f=i[1],m=Object(a.useState)(""),O=Object(u.a)(m,2),p=O[0],v=O[1],x=Object(a.useState)(""),w=Object(u.a)(x,2),g=w[0],C=w[1],k=Object(a.useState)(!1),N=Object(u.a)(k,2),S=N[0],y=N[1],F=Object(a.useState)(null),T=Object(u.a)(F,2),D=T[0],B=T[1];Object(a.useEffect)((function(){j.a.get("/api/persons").then((function(e){c(e.data),y(!1)}))}),[S]),console.log("newFilter :>> ",g);var P=function(e){window.confirm("Delete ".concat(e.name,"?"))&&(console.log("person >>>",e),j.a.delete("/api/persons/".concat(e.id)).then((function(e){console.log("response :>> ",e),y(!0)})).catch((function(n){B("".concat(e.name," is already deleted from the database :(")),setTimeout((function(){B(null)}),5e3),f(""),v("")})))},E=g?t.filter((function(e){return!!e.name.toLowerCase().includes(g.toLowerCase())})):t;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(h,{notification:D}),Object(r.jsx)(d,{handleFilter:function(e){C(e.target.value)},newFilter:g}),Object(r.jsx)("h3",{children:"add a new"}),Object(r.jsx)(l,{addPerson:function(e){if(e.preventDefault(),t.find((function(e){return e.name===b}))){window.confirm("".concat(b," is already added to phonebook,replace the old number with a new one?"));var n=t.filter((function(e){return e.name===b}))[0].id,a={name:b,number:p};j.a.put("/api/persons/".concat(n),a).then((function(e){c(t.map((function(t){return t.id!==n?t:e.data}))),f(""),v(""),B("Updated ".concat(a.name)),setTimeout((function(){B(null)}),5e3)})).catch((function(e){B("".concat(a.name," is already deleted from the database :(")),setTimeout((function(){B(null)}),5e3),f(""),v("")}))}else{var o={name:b,number:p};j.a.post("/api/persons",o).then((function(e){c(t.concat(e.data)),f(""),v(""),B("Added ".concat(o.name)),setTimeout((function(){B(null)}),5e3)})).catch((function(e){B("".concat(e.response.data)),setTimeout((function(){B(null)}),5e3),f(""),v("")}))}},name:b,handleNameChange:function(e){f(e.target.value)},newNumber:p,handleNumberChange:function(e){v(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),E.map((function(e,n){return Object(r.jsx)(s,{person:e,handleDelButton:P},n)}))]})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(f,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.714d0684.chunk.js.map
(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),o=n(14),i=n.n(o),r=(n(19),n(3)),u=n(0),s=function(e){var t=e.person,n=e.handleDelButton;e.key;return Object(u.jsxs)("div",{children:[t.name," ",t.number,Object(u.jsx)("button",{value:t.name,"data-mssg":t.id,onClick:n,children:"delete"})]})},l=function(e){var t=e.addPerson,n=e.name,a=e.handleNumberChange,c=e.newNumber,o=e.handleNameChange;return Object(u.jsxs)("form",{onSubmit:t,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:o}),"number: ",Object(u.jsx)("input",{value:c,onChange:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var t=e.newFilter,n=e.handleFilter;return Object(u.jsxs)("div",{children:["filter shown with",Object(u.jsx)("input",{value:t,onChange:n})]})},h=n(4),b=n.n(h),j=function(e){var t=e.notification;return null===t?null:Object(u.jsx)("div",{className:"notification",children:t})},m=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),i=Object(r.a)(o,2),h=i[0],m=i[1],f=Object(a.useState)(""),p=Object(r.a)(f,2),O=p[0],g=p[1],v=Object(a.useState)(""),x=Object(r.a)(v,2),w=x[0],k=x[1],C=Object(a.useState)(!1),N=Object(r.a)(C,2),S=N[0],y=N[1],F=Object(a.useState)(null),D=Object(r.a)(F,2),T=D[0],B=D[1];Object(a.useEffect)((function(){b.a.get("http://agile-taiga-71127.herokuapp.com/api/persons").then((function(e){console.log("response :>> ",e),c(e.data),y(!1)}))}),[S]),console.log("newFilter :>> ",w);var P=function(e){window.confirm("Delete ".concat(e.target.value,"?"))&&b.a.delete("http://agile-taiga-71127.herokuapp.com/api/persons/".concat(e.target.dataset.mssg)).then((function(e){console.log("response :>> ",e),y(!0)})).catch((function(t){B("".concat(e.target.value," is already deleted from the database :(")),setTimeout((function(){B(null)}),5e3),m(""),g("")}))},E=w?n.filter((function(e){return!!e.name.toLowerCase().includes(w.toLowerCase())})):n;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(j,{notification:T}),Object(u.jsx)(d,{handleFilter:function(e){k(e.target.value)},newFilter:w}),Object(u.jsx)("h3",{children:"add a new"}),Object(u.jsx)(l,{addPerson:function(e){if(e.preventDefault(),n.find((function(e){return e.name===h}))){window.confirm("".concat(h," is already added to phonebook,replace the old number with a new one?"));var t=n.filter((function(e){return e.name===h}))[0].id,a={name:h,number:O};b.a.put("http://agile-taiga-71127.herokuapp.com/api/persons/".concat(t),a).then((function(e){c(n.map((function(n){return n.id!==t?n:e.data}))),m(""),g(""),B("Updated ".concat(a.name)),setTimeout((function(){B(null)}),5e3)})).catch((function(e){B("".concat(a.name," is already deleted from the database :(")),setTimeout((function(){B(null)}),5e3),m(""),g("")}))}else{var o={name:h,number:O};b.a.post("http://agile-taiga-71127.herokuapp.com/api/persons",o).then((function(e){c(n.concat(o)),m(""),g(""),B("Added ".concat(o.name)),setTimeout((function(){B(null)}),5e3)}))}},name:h,handleNameChange:function(e){m(e.target.value)},newNumber:O,handleNumberChange:function(e){g(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),E.map((function(e,t){return Object(u.jsx)(s,{person:e,handleDelButton:P},t)}))]})};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(m,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.ab8e2d45.chunk.js.map